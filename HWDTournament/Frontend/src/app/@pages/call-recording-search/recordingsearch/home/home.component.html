

<div fxLayout="column" class="container"  [ngClass.xs]="'components-container-xs'"  fxLayoutGap="20px" fxLayoutAlign="center">
    <div class="loading-indicator">
        <mat-progress-spinner mode="indeterminate" *ngIf="spinnerOn"></mat-progress-spinner>
      </div>
  <div fxFlex="" class="select-component-holder mat-elevation-z4 center-align">  
      <mat-toolbar class="list-header" style="height: 50px;">
          <h1 class="mat-headline center-align"> <span style="color:#5c6bc0;">Search call recordings</span></h1>
      </mat-toolbar>   
      <form (ngSubmit)="onSearchSubmit(searchForm)" #searchForm="ngForm">
        <div class="list-container">
          <mat-divider color="primary" style="padding:5px;"></mat-divider>
          <mat-card class="mat-card-infix" role="region"><span style="font-weight:bold;">Quick Search</span>
             <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">              
              <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
                  <mat-form-field class="mat-form-field-infix">
                      <input  matInput [min]="minDate" [max]="maxDate" [matDatepicker]="Frompicker" placeholder="From Date" (dateChange)="OnFromDateChanged($event)" 
                      name="fromDate" [(ngModel)]="searchview.dateFrom" required>
                      <mat-datepicker-toggle matSuffix [for]="Frompicker"></mat-datepicker-toggle>
                      <mat-datepicker #Frompicker></mat-datepicker>
                      <mat-error>
                        Enter a valid date.
                       </mat-error>
                  </mat-form-field>  
              </div>
              <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50" >                
                  <mat-form-field class="mat-form-field-infix">
                      <input matInput [min]="ToMinDate" [max]="maxDate"  [matDatepicker]="picker" placeholder="To Date" name="toDate" [(ngModel)]="searchview.dateTo" required>
                      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                      <mat-datepicker #picker></mat-datepicker>
                      <mat-error>
                        Enter a valid date.
                       </mat-error>
                  </mat-form-field>
              </div>             
            </div> 
          </mat-card>    

          <mat-divider></mat-divider>
          <mat-card class="mat-card-infix" role="region"> <span style="font-weight:bold;">Campaign Details</span> 
            <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">      
                <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
                    <mat-form-field class="mat-form-field-infix">
                        <mat-select  placeholder="Business Unit" [(ngModel)]="searchview.businessUnit" name="businessUnit" (selectionChange)="onSelectedBusinessUnitChange($event)" required>
                          <mat-option *ngFor="let businessunit of businessUnits" [value]="businessunit.value">
                            {{ businessunit.name }}
                          </mat-option>
                        </mat-select>
                        <mat-error>
                          Please select a business unit.
                         </mat-error>
                      </mat-form-field>
                </div>
                <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">                
                    <mat-form-field class="mat-form-field-infix">
                        <mat-select placeholder="Select Database" [(ngModel)]="searchview.database" name="database" (selectionChange)="onSelectedDatabaseChange($event)" required>
                            <input matInput type="text" (keyup)="filterdatabases($event.target.value)" class="select-Input-filter">
                          <mat-option *ngFor="let db of filteredDatabases" [value]="db.value">
                            {{ db.name }}
                          </mat-option>
                        </mat-select>
                        <mat-error>
                          Please select a database.
                         </mat-error>
                      </mat-form-field>
                </div>

                <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
                    <mat-form-field class="mat-form-field-infix">
                        <mat-select placeholder="Select Book" [(ngModel)]="searchview.book" name="book" (selectionChange)="onSelectedBookChange($event)" required>
                            <input matInput type="text" (keyup)="filterBooks($event.target.value)" class="select-Input-filter">
                          <mat-option *ngFor="let book of filteredBooks" [value]="book.value">
                            {{ book.name }}
                          </mat-option>
                        </mat-select>
                        <mat-error>
                          Please select a book.
                         </mat-error>
                      </mat-form-field>
                </div>
            </div>         
          </mat-card>
          <mat-divider></mat-divider>
          <mat-card class="mat-card-infix" role="region"> <span style="font-weight:bold;">Account Status</span> 
            <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">      
                <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
                    <mat-form-field class="mat-form-field-infix">
                        <mat-select placeholder="Select Class" [(ngModel)]="searchview.classHash" name="class">
                            <input matInput type="text" (keyup)="filterListclasses($event.target.value)" class="select-Input-filter">
                          <mat-option *ngFor="let class of filteredClasses" [value]="class.value">
                            {{ class.name }}
                          </mat-option>
                        </mat-select>
                        <mat-hint align="start"><strong>Optional</strong></mat-hint>
                      </mat-form-field>
                </div>
                <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50" >                
                    <mat-form-field class="mat-form-field-infix">
                        <mat-select placeholder="Select Comment" [(ngModel)]="searchview.comment" name="comment">
                            <input matInput type="text" (keyup)="filterComments($event.target.value)" class="select-Input-filter">
                          <mat-option *ngFor="let comment of filteredComments" [value]="comment.value">
                            {{ comment.name }}
                          </mat-option>
                        </mat-select>
                        <mat-hint align="start"><strong>Optional</strong></mat-hint>
                      </mat-form-field>
                </div>
            </div>         
          </mat-card>
          <mat-divider></mat-divider>
          <mat-card class="mat-card-infix" role="region"> <span style="font-weight:bold;">Agent Details</span> 
            <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">      
                <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
                    <mat-form-field class="mat-form-field-infix">
                        <mat-select placeholder="Agent Group" [(ngModel)]="searchview.agentGroup" name="agentGroup" (selectionChange)="onSelectedAgentChange($event)">
                          <mat-option *ngFor="let agentgroup of agentGroups" [value]="agentgroup.value">
                            {{ agentgroup.name }}
                          </mat-option>
                        </mat-select>
                        <mat-hint align="start"><strong>Optional</strong></mat-hint>
                      </mat-form-field>
                </div>
                <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50" >                
                    <mat-form-field class="mat-form-field-infix">
                        <mat-select placeholder="Employee Code" [(ngModel)]="searchview.empCode" name="empCode">
                            <input matInput type="text" (keyup)="filterEmployeeCodes($event.target.value)" class="select-Input-filter">
                          <mat-option *ngFor="let empCode of filteredemployeeCodes" [value]="empCode.value">
                            {{ empCode.name }}
                          </mat-option>
                        </mat-select>
                        <mat-hint align="start"><strong>Optional</strong></mat-hint>
                      </mat-form-field>
                </div>
            </div>         
          </mat-card>

          <mat-divider></mat-divider>
          <mat-card class="mat-card-infix" role="region"> <span style="font-weight:bold;">Customer Details</span> 
            <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">      
                <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
                    <mat-form-field class="mat-form-field-infix">
                        <input matInput type="text" placeholder="Account Number" [(ngModel)]="searchview.accountNo" name="accountNo">
                        <button mat-button *ngIf="searchview.accountNo" matSuffix mat-icon-button aria-label="Clear" (click)="searchview.accountNo=''">
                          <mat-icon>close</mat-icon>
                        </button>
                        <mat-hint align="start"><strong>Optional</strong></mat-hint>
                      </mat-form-field>
                </div>
                <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50" >                
                    <mat-form-field class="mat-form-field-infix">
                        <input matInput type="text" placeholder="Account Number (old)" [(ngModel)]="searchview.accountNoOld" name="searchview.accountNoOld">
                        <button mat-button *ngIf="searchview.accountNoOld" matSuffix mat-icon-button aria-label="Clear" (click)="searchview.accountNoOld=''">
                          <mat-icon>close</mat-icon>
                        </button>
                        <mat-hint align="start"><strong>Optional</strong></mat-hint>
                      </mat-form-field>
                </div>
                <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
                    <mat-form-field class="mat-form-field-infix">
                        <input matInput type="text" placeholder="Customer First Name" [(ngModel)]="searchview.customerFirstName" name="firstname"> 
                        <button mat-button *ngIf="searchview.customerFirstName" matSuffix mat-icon-button aria-label="Clear" (click)="searchview.customerFirstName=''">
                          <mat-icon>close</mat-icon>
                        </button>
                        <mat-hint align="start"><strong>Optional</strong></mat-hint>
                      </mat-form-field>
                </div>
            </div>      
            <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">      
                
                <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50" >                
                    <mat-form-field class="mat-form-field-infix">
                        <input matInput type="text" placeholder="Second Name" [(ngModel)]="searchview.secondName" name="secondname">
                        <button mat-button *ngIf="searchview.secondName" matSuffix mat-icon-button aria-label="Clear" (click)="searchview.secondName=''">
                          <mat-icon>close</mat-icon>
                        </button>
                        <mat-hint align="start"><strong>Optional</strong></mat-hint>
                      </mat-form-field>
                </div>
                <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
                  <mat-form-field class="mat-form-field-infix">
                      <input type="tel" matInput placeholder="Telephone" [(ngModel)]="searchview.phoneNumber" name="phone" pattern="^[0-9]*$" maxLength="10">
                      <mat-icon matSuffix>mode_edit</mat-icon>
                      <mat-hint align="start"><strong>Optional</strong></mat-hint>
                      <mat-error>
                        Please enter a valid telephone
                       </mat-error>
                    </mat-form-field>
              </div>
            </div>         
            <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">      
               
                <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50" >                
                    
                </div>
            </div>         
            <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">      
                <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
                    <mat-form-field class="mat-form-field-infix">
                        <input matInput type="text" placeholder="Customer ID" [(ngModel)]="searchview.customerId" name="idNumber" pattern="^[0-9]*$" maxLength="13">
                        <button mat-button *ngIf="searchview.customerId" matSuffix mat-icon-button aria-label="Clear" (click)="searchview.customerId=''">
                          <mat-icon>close</mat-icon>
                        </button>
                        <mat-hint align="start"><strong>Optional</strong></mat-hint>
                        <mat-error>
                          Enter valid ID
                         </mat-error>
                      </mat-form-field>
                </div>
                <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50" >                
                  <mat-form-field class="mat-form-field-infix">
                      <input matInput type="email" placeholder="Email Address" [(ngModel)]="searchview.emailAddress" name="email" class="home-input" email>
                      <button mat-button *ngIf="searchview.emailAddress" matSuffix mat-icon-button aria-label="Clear" (click)="searchview.emailAddress=''">
                        <mat-icon>close</mat-icon>                         
                      </button>
                      <mat-hint align="start"><strong>Optional</strong></mat-hint>
                      <mat-error>
                       Enter valid Email
                      </mat-error>
                    </mat-form-field>
              </div>                
            </div>      
            <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">      
                <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
                    <button mat-raised-button color="primary" type="submit" [disabled]="!searchForm.valid">Search</button>
                </div>
                <div fxFlex.xs="80" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50" >               
                </div>
            </div>           
          </mat-card>
            
       </div>
      </form> 
  </div>
</div>



                    
                  